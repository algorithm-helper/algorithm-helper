!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=t.Topic=t.Subcategory=t.Color=t.Category=void 0;var n=s(r(11)),o=s(r(12)),i=s(r(13)),u=s(r(14)),a=s(r(15));function s(e){return e&&e.__esModule?e:{default:e}}t.Category=n.default,t.Color=o.default,t.Subcategory=i.default,t.Topic=u.default,t.User=a.default},function(e,t){e.exports=require("validator")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopicHelpers=t.SubcategoryHelpers=t.ColorHelpers=t.CategoryHelpers=t.AccountHelpers=void 0;var n=s(r(10)),o=s(r(19)),i=s(r(20)),u=s(r(21)),a=s(r(22));function s(e){return e&&e.__esModule?e:{default:e}}t.AccountHelpers=n.default,t.CategoryHelpers=o.default,t.ColorHelpers=i.default,t.SubcategoryHelpers=u.default,t.TopicHelpers=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(26));t.log=n.default},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=f(r(6)),o=f(r(7)),i=f(r(8)),u=f(r(9)),a=r(3),s=r(23),c=r(28),d=r(30),l=r(4);function f(e){return e&&e.__esModule?e:{default:e}}var y=i.default.join(e,"..","public"),g=process.env.PORT||5e3,p=(0,o.default)();p.use(d.cors),p.use(o.default.static(y)),p.use(n.default.json()),p.use(n.default.urlencoded({extended:!1})),p.use((0,u.default)({secret:"<Algorithm Helper Secret>",resave:!1,saveUninitialized:!0,cookie:{secure:!1}})),(0,s.setupMongoose)(),p.listen(g,function(){l.log.info("Server started on port "+g)}),p.post("/accounts/login",function(e,t){t.setHeader("Content-Type","application/json");var r=e.body,n=r.email,o=r.password;a.AccountHelpers.findUserByCredentials(n,o).then(function(e){if(null!==e){var r=e.user,n=e.token;t.header("X-Auth",n).status(200).send(JSON.stringify({data:r}))}else t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(){t.status(400).send(JSON.stringify({error:"Invalid login credentials"}))})}),p.post("/accounts/sign-up",function(e,t){t.setHeader("Content-Type","application/json");var r=e.body,n=r.fullName,o=r.email,i=r.password;a.AccountHelpers.signupNewUser(n,o,i).then(function(e){if(null!==e){var r=e.user,n=e.token;t.header("X-Auth",n).status(200).send(JSON.stringify({data:r}))}else t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e}))})}),p.post("/accounts/user",c.authenticateUser,function(e,t){t.send(e.user)}),p.get("/actions/get-item-completed",function(e,t){l.log.info(e,t)}),p.get("/actions/get-item-bookmarked",function(e,t){l.log.info(e,t)}),p.post("/actions/mark-as-completed",function(e,t){l.log.info(e,t)}),p.post("/actions/save-to-bookmarks",function(e,t){l.log.info(e,t)}),p.get("/data/categories",function(e,t){t.setHeader("Content-Type","application/json"),a.CategoryHelpers.getCategoryData().then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/subcategories",function(e,t){t.setHeader("Content-Type","application/json"),a.SubcategoryHelpers.getSubcategoryData().then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/categories/:categoryKey",function(e,t){t.setHeader("Content-Type","application/json");var r=e.params.categoryKey;a.CategoryHelpers.getCategoryDataByKey(r).then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/categories/:categoryKey/:subcategoryKey",function(e,t){t.setHeader("Content-Type","application/json");var r=e.params,n=r.categoryKey,o=r.subcategoryKey;a.SubcategoryHelpers.getSubcategoryDataByKey(n,o).then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/categories/:categoryKey/:subcategoryKey/:topicKey",function(e,t){t.setHeader("Content-Type","application/json");var r=e.params,n=r.categoryKey,o=r.subcategoryKey,i=r.topicKey;a.TopicHelpers.getTopicDataByKey(n,o,i).then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/colors",function(e,t){t.setHeader("Content-Type","application/json"),a.ColorHelpers.getColorData().then(function(e){t.status(200).send(JSON.stringify({data:e}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/extended/categories",function(e,t){t.setHeader("Content-Type","application/json"),a.CategoryHelpers.getCategoryDataExtended().then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/extended/categories/:categoryKey",function(e,t){t.setHeader("Content-Type","application/json");var r=e.params.categoryKey;a.CategoryHelpers.getCategoryDataByKeyExtended(r).then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/extended/categories/:categoryKey/:subcategoryKey",function(e,t){t.setHeader("Content-Type","application/json");var r=e.params,n=r.categoryKey,o=r.subcategoryKey;a.SubcategoryHelpers.getSubcategoryDataByKeyExtended(n,o).then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e.message}))})}),p.get("/data/utils/categories-color-key-mapping",function(e,t){t.setHeader("Content-Type","application/json"),a.CategoryHelpers.getCategoryColorKeyMapping().then(function(e){null!==e?t.status(200).send(JSON.stringify({data:e})):t.status(400).send(JSON.stringify({error:"Invalid request"}))}).catch(function(e){t.status(400).send(JSON.stringify({error:e}))})}),p.get("*",function(e,t){t.sendFile(i.default.join(y,"index.html"))}),t.default=p}).call(this,"/")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("express-session")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o={signupNewUser:function(e,t,r){var o=new n.User({fullName:e,email:t,password:r});return o.save().then(function(){return o.generateAuthToken()}).then(function(e){return{user:o,token:e}})},findUserByToken:function(e){return n.User.findByToken(e)},findUserByCredentials:function(e,t){var r=void 0;return n.User.findByCredentials(e,t).then(function(e){return r=e,e.generateAuthToken()}).then(function(e){return{user:r,token:e}})}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0)).default.model("Category",{key:{type:String,required:!0,unique:!0},slug:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},colorKey:{type:Number,required:!0},children:{type:[String],required:!0},order:{type:Number,required:!0}},"Categories");t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0)).default.model("Color",{key:{type:Number,required:!0,unique:!0},hexCode:{type:String,required:!0,unique:!0},description:{type:String}},"Colors");t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(0)),o=i(r(2));function i(e){return e&&e.__esModule?e:{default:e}}var u=n.default.model("Subcategory",{key:{type:String,required:!0,unique:!0},slug:{type:String,required:!0},title:{type:String,required:!0},parent:{type:String,required:!0},description:{type:String,required:!0},imageUrl:{type:String,required:!0,validate:{validator:o.default.isURL,message:"{VALUE} is an invalid url"}},order:{type:Number,required:!0},children:{type:[String],required:!0}},"Subcategories");t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(0)),o=i(r(2));function i(e){return e&&e.__esModule?e:{default:e}}var u=n.default.model("Topic",{key:{type:String,required:!0,unique:!0},slug:{type:String,required:!0},title:{type:String,required:!0},parent:{type:String,required:!0},description:{type:String,required:!0},order:{type:Number,required:!0},children:[{type:{type:String,required:!0},resourceUrl:{type:String,validate:{validator:o.default.isURL,message:"{VALUE} is an invalid url"}},language:{type:String},title:{type:String}}]},"Topics");t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(16)),o=s(r(17)),i=s(r(18)),u=s(r(0)),a=s(r(2));function s(e){return e&&e.__esModule?e:{default:e}}var c=new u.default.Schema({fullName:{type:String,required:!0,trim:!0,minlength:1},email:{type:String,required:!0,trim:!0,minlength:1,unique:!0,validate:{validator:a.default.isEmail,message:"{VALUE} is an invalid email"}},password:{type:String,required:!0,minlength:8},tokens:[{access:{type:String,required:!0},token:{type:String,required:!0}}],completedItems:[{categoryKey:{type:String,required:!0},subcategoryKey:{type:String,required:!0},topicKey:{type:String,required:!0},topicItemType:{type:String,required:!0},dateCompleted:{type:Number,required:!0}}],bookmarks:[{categoryKey:{type:String,required:!0},subcategoryKey:{type:String,required:!0},topicKey:{type:String,required:!0},topicItemType:{type:String,required:!0},dateBookmarked:{type:Number,required:!0}}]});c.methods.toJSON=function(){return n.default.pick(this.toObject(),["_id","fullName","email"])},c.methods.generateAuthToken=function(){var e=i.default.sign({_id:this._id.toHexString(),access:"auth"},"abc123").toString();return this.tokens=this.tokens.concat([{access:"auth",token:e}]),this.save().then(function(){return e})},c.statics.findByToken=function(e){var t=void 0;try{t=i.default.verify(e,"abc123")}catch(e){return Promise.reject(e)}return this.findOne({_id:t._id,"tokens.token":e,"tokens.access":"auth"})},c.statics.findByCredentials=function(e,t){return this.findOne({email:e}).then(function(e){return e?new Promise(function(r,n){o.default.compare(t,e.password,function(t,o){o?r(e):n(t)})}):Promise.reject(new Error("User does not exist"))})},c.pre("save",function(e){var t=this;t.isModified("password")?o.default.genSalt(10,function(r,n){o.default.hash(t.password,n,function(r,n){t.password=n,e()})}):e()});var d=u.default.model("User",c,"Users");t.default=d},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("bcryptjs")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(1);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={getCategoryData:function(){return i.Category.find({},{key:!0,slug:!0,title:!0,description:!0,colorKey:!0,order:!0,children:!0}).lean().exec().then(function(e){return e.sort(function(e,t){return e.order-t.order})})},getCategoryDataByKey:function(e){return i.Category.findOne({key:e},{key:!0,slug:!0,title:!0,description:!0,colorKey:!0,order:!0,children:!0}).lean().exec()},getCategoryDataExtended:function(){return Promise.all([i.Category.find({},{key:!0,slug:!0,title:!0,description:!0,colorKey:!0,order:!0}).lean().exec(),i.Subcategory.find({},{key:!0,slug:!0,title:!0,parent:!0,description:!0,imageUrl:!0,order:!0}).lean().exec()]).then(function(e){var t=o(e,2),r=t[0],i=t[1],a=r.map(function(e,t){return{slug:e.slug,index:t}}).reduce(function(e,t){return n({},e,u({},t.slug,t.index))},{});return i.forEach(function(e){var t=a[e.parent];r[t].children||(r[t].children=[]),r[t].children.push(e)}),r.forEach(function(e){e.children=e.children.sort(function(e,t){return e.order-t.order})}),r.sort(function(e,t){return e.order-t.order})})},getCategoryDataByKeyExtended:function(e){return Promise.all([i.Category.findOne({key:e},{key:!0,slug:!0,title:!0,description:!0,colorKey:!0,order:!0}).lean().exec(),i.Subcategory.find({parent:e},{key:!0,slug:!0,title:!0,parent:!0,description:!0,imageUrl:!0,order:!0}).lean().exec()]).then(function(e){var t=o(e,2),r=t[0],n=t[1];return r.children=n.sort(function(e,t){return e.order-t.order}),r})},getCategoryColorKeyMapping:function(){return i.Category.find({},{key:!0,colorKey:!0}).lean().exec().then(function(e){return e.reduce(function(e,t){return n({},e,u({},t.key,t.colorKey))},{})})}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o={getColorData:function(){return n.Color.find({},{key:!0,hexCode:!0,description:!0}).lean().exec()}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=r(1),i={getSubcategoryData:function(){return o.Subcategory.find({},{key:!0,slug:!0,title:!0,parent:!0,description:!0,imageUrl:!0,order:!0,children:!0}).lean().exec().then(function(e){return e.sort(function(e,t){return e.order-t.order})})},getSubcategoryDataByKey:function(e,t){return o.Subcategory.findOne({key:e+"/"+t},{key:!0,slug:!0,title:!0,parent:!0,description:!0,imageUrl:!0,order:!0,children:!0}).lean().exec()},getSubcategoryDataByKeyExtended:function(e,t){return Promise.all([o.Subcategory.findOne({key:e+"/"+t},{key:!0,slug:!0,title:!0,parent:!0,description:!0,imageUrl:!0,order:!0}).lean().exec(),o.Topic.find({parent:t},{key:!0,slug:!0,title:!0,parent:!0,description:!0,order:!0}).lean().exec()]).then(function(e){var t=n(e,2),r=t[0],o=t[1];return r.children=o.sort(function(e,t){return e.order-t.order}),r})}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o={getTopicDataByKey:function(e,t,r){return n.Topic.findOne({key:e+"/"+t+"/"+r},{key:!0,slug:!0,title:!0,parent:!0,description:!0,order:!0,children:!0}).lean().exec()}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupMongoose=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(24));t.setupMongoose=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),o=r(25),i=r(4);t.default=function(){n.default.connect(o.MONGO_URL,{useNewUrlParser:!0}),n.default.connection.on("connected",function(){i.log.info("Mongoose connected")}),n.default.connection.on("disconnected",function(){i.log.info("Mongoose disconnected")}),process.on("SIGINT",function(){n.default.connection.close(function(){i.log.info("Mongoose connection closed"),process.exit(0)})}),process.on("exit",function(){n.default.connection.close(function(){i.log.info("Mongoose connection closed"),process.exit(0)})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=process.env.MLAB_MONGO_URL||"mongodb://localhost:27017/AlgorithmHelper";t.MONGO_URL=n,t.DB_NAME="AlgorithmHelper",t.CATEGORIES_COLLECTION_NAME="Categories",t.SUBCATEGORIES_COLLECTION_NAME="Subcategories",t.TOPICS_COLLECTION_NAME="Topics",t.COLORS_COLLECTION_NAME="Colors"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(27));t.default=n.default.createLogger({name:"AlgorithmHelper",level:"debug"})},function(e,t){e.exports=require("bunyan")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authenticateUser=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(29));t.authenticateUser=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.default=function(e,t,r){var o=e.header("X-Auth");n.AccountHelpers.findUserByToken(o).then(function(t){if(!t)throw new Error("User does not exist");e.user=t,e.token=o,r()}).catch(function(e){t.status(401).send(JSON.stringify({error:e.message}))})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cors=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(31));t.cors=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),r()}}]);